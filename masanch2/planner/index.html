<!DOCTYPE html>
<!-- CIS-255 - Course Planner


-->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="Michael Sanchez">

    <title>CIS 255 - Course Planner</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Custom CSS -->
    <link href="custom.css" rel="stylesheet">

  </head>

  <body>
 
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../menu.html">CIS-255</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Programs <span class="caret"></span></a>
				<ul class="dropdown-menu">
					<li><a href="../progTED.html">TEDxSVSU</a></li>
					<li><a href="../progPlanner.html">Class Planner</a></li>
				</ul>
			</li>
			<li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">JavaScript Tests <span class="caret"></span></a>
				<ul class="dropdown-menu">
					<li><a href="../js_test01.html">Test 1: Data Types</a></li>
					<li><a href="../js_test02.html">Test 2: Control Statements</a></li>
					<li><a href="../js_test03.html">Test 3: Loops</a></li>
					<li role="separator" class="divider"></li>
					<li><a href="../js_test07.html">Exercise 7: Functions</a></li>
					<li><a href="../js_test08.html">Exercise 8: Array of Functions</a></li>
					<li role="separator" class="divider"></li>
					<li><a href="../js_test09.html">Exercise 9: JSON</a></li>
					<li><a href="../js_test10.html">Exercise 10: Yahtzee</a></li>
					<li><a href="../js_test11.html">Exercise 11: 2-D Array</a></li>
				</ul>
			</li>
            <li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">In-Class <span class="caret"></span></a>
				<ul class="dropdown-menu">
					<li><a href="../inclass/jq01.html">Exercise 1</a></li>
					<li><a href="../inclass/jq02.html">Exercise 2</a></li>
				</ul>
			</li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

	
	<div class="container">
	
		<h1 class="page-header">Course Planner</h1>
		
		
		<div id="" class="row"><!-- START FORM ROW -->
		
			<div class="col-md-6"><!-- TAKEN -->
			
				<div class="form-group">
					<label for="comment">Taken</label>
					<textarea class="form-control" rows="5" id="taken">cs116, cis255</textarea>
				</div>
			
			</div><!-- /col-md-6 -->
		
			<div class="col-md-6"><!-- NEEDED -->
		
				<div class="form-group">
					<label for="comment">Needed</label>
					<textarea class="form-control" rows="5" id="needed" readonly></textarea>
					<label class="radio-label">Degree Type:  </label>
					<label class="radio-inline"><input id="radio_cis" name="degreetype" type="radio">CIS</label>
					<label class="radio-inline"><input id="radio_cs" name="degreetype" type="radio">CS</label>
				</div>
			
			</div><!-- /col-md-6 -->
			
		</div> <!-- /row - END FORM ROW -->
		
		<div class="row"><!-- START RESULTS ROW -->
		
			<div class="col-md-6">
				<label>Available</label>
				<table class="table table-striped">
					<tbody id="available"></tbody>
				</table>
			
			</div><!-- /col-md-6 -->
		
			<div class="col-md-6">
				<label>Not Available</label>
				<table class="table">
					<tbody id="notavailable"></tbody>
				</table>
			
			</div><!-- /col-md-6 -->
			
		</div> <!-- /row - END RESTULS ROW -->
		
		
		
		<div class="row">
		
			<div class="col-md-6">
				<button id="update" class="btn btn-large">Update</button>
				<p id="before"></p>
				<p id="after"></p>
			</div>
		
		</div><!-- row -->

    </div><!-- container -->
	
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

	<script>
	
		// CIS & CS - course arrays
		var cisCourses = ["math103", "math120b", "cs105", "cs116", "cs146", "cs216", "cs245", "cis255", "cis301", "cis311", "cis333", "cis386", "cis355", "cis366", "cis422", "cis424"];
		var csCourses = ["math103", "math140", "math120a", "math300", "cis255", "cis355", "cis357", "cs105", "cs146", "cs116", "cs245", "cs216", "cs411", "cs331", "cs316", "cs446", "cs401", "cs451", "cs461", "cs421", "cs471"];

		// This will contain a course array after a degree type is selected
		var degreeCourses;
		
		// Courses Taken - onchange
		document.getElementById("taken").onkeyup = function () {
			updateCoursesNeeded();
		}
		
		// CIS Radio - onClick
		document.getElementById("radio_cis").onclick = function () {
			degreeCourses = cisCourses;
			updateCoursesNeeded();
		}
		// CS Radio - onClick
		document.getElementById("radio_cs").onclick = function () {
			degreeCourses = csCourses;
			updateCoursesNeeded();
		}
		
		// Update Button - onClick
		document.getElementById("update").onclick = function() {
		
			// Get user input
			var input = document.getElementById("taken").value;
			
			// Parse 'input' string into array
			var courses = courseStringToArray(input);
			
			// temp - write to need textarea..
			document.getElementById("needed").innerHTML = courses;
		}
		
		// Updates courses needed with current courses minus courses taken
		function updateCoursesNeeded () {
		
			// Get user input from 'taken'
			var input = document.getElementById("taken").value;
			
			// Parse 'taken' input string into an array
			var takenCourses = courseStringToArray(input);
			
			// Get array of needed courses
			var neededCourses = arrayDifference(degreeCourses, takenCourses);
		
			// Update courses 'needed' textarea
			document.getElementById("needed").innerHTML = neededCourses;
			
		}
		
		// Convert a comma-separated string into and array
		//	- returns: array of course strings
		function courseStringToArray (cString) {
			var cArray = new Array;
			var c = cString.indexOf (",");
			
			// Loop - While "," is present in cString
			while (c >= 0) {
			
				// Push course
				cArray.push (cString.substr(0, c).toLowerCase());
				
				// Remove from input string
				cString = cString.substr (c + 1, cString.length).trim ();
				
				// Look for next comma				
				c = cString.indexOf(",");
			}
			
			// Add last course
			cArray.push (cString.toLowerCase());
			
			// Return alphabetically sorted course array
			return cArray;
		}
		
		// Returns the difference between a large and small array
		//	- returns: large - small
		function arrayDifference (large, small) {
		
			// Quick way to copy array by value!
			var difference = large.slice(0);
			
			// Remove every courses in 'taken' from degreeCourses
			for (var i = 0; i < small.length; i++) {
				var index = difference.indexOf (small[i]);
			
				if (index >= 0) {
					difference.splice (index, 1);
				}
			}
		
			return difference;
		}
		
		
		
		
		//-----------------------------------
		// Savin this shit for later... maybe
		//--------------------------------------//
		/*json.courses.sort(function(a, b) {
			
			al = a.prefix.toLowerCase();
			bl = b.prefix.toLowerCase();

			return (al < bl) ? -1 : (al > bl) ? 1 : 0;
		});*/
		
		function onLoad ()
		{
			// Output raw XMLHttpResponse
			//document.getElementById("available").innerHTML =  this.responseText;
		
		
			// Parse JSON
			var json = JSON.parse(this.responseText);
			
			// JSON output
			//document.getElementById("notavailable").innerHTML = this.responseText;
			
			// Test output
			var loop = document.getElementById("available");
			
			for (var i = 0; i < json.courses.length; i++) {
				loop.innerHTML = loop.innerHTML + "<tr><td>" + json.courses[i].prefix + " - " + json.courses[i].courseNumber  + "</td><td>[" + json.courses[i].meetingTimes[0].days + "]</td></tr>";
			}
		}

		var req = new XMLHttpRequest();
		req.addEventListener("load", onLoad);
		req.open("GET", "https://api.svsu.edu/courses?prefix=CIS&term=17\/WI");
		req.send();
		
	</script>


  </body>
</html>